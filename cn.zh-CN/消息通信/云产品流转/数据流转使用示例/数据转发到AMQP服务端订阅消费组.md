---
keyword: [物联网, IoT, 数据流转, AMQP]
---

# 数据转发到AMQP服务端订阅消费组

您可以使用规则引擎将设备发送到物联网平台的消息，经过规则SQL处理后，再转发到AMQP服务端订阅消费组，并通过AMQP客户端消费消息。

-   已创建数据转发规则和编写处理数据的SQL，请参见[设置数据流转规则](/cn.zh-CN/消息通信/云产品流转/设置数据流转规则.md)。
-   已创建AMQP服务端订阅消费组，作为数据转发目的地。消费组的创建和管理，请参见[管理消费组](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/管理消费组.md)。

## 操作步骤

1.  登录[物联网平台控制台](http://iot.console.aliyun.com/)。

2.  在实例概览页，找到对应的实例，单击实例进入实例详情页。

    ![实例概览](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9275903061/p174584.png)

3.  在左侧导航栏，选择**规则引擎** \> **云产品流转**。

4.  单击规则对应的**查看**，进入数据流转规则页。

5.  单击**转发数据**一栏对应的**添加操作**。

6.  在添加操作对话框中，选择操作为**发布到AMQP服务端订阅消费组**。按照界面提示，设置其他信息，单击**确认**。

    ![添加操作](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9723700061/p166288.png)

    |参数|描述|
    |--|--|
    |选择操作|选择**发布到AMQP服务端订阅消费组**。|
    |消费组|选择一个已创建的消费组作为数据转发目标。单击**创建消费组**可以进行消费组创建。|
    |Tag|设置tag后，所有通过该操作流转到AMQP服务端订阅消费组里的消息都会携带该tag。 tag长度为1~128个字符，可以输入常量或变量。

    -   常量支持输入中文汉字、英文字母、数字。
    -   变量格式为$\{key\}，代表SQL处理后的JSON数据中key对应的value值。如果取不到value值，则消息不携带tag。 |

7.  回到云产品流转页，单击规则对应的**启动**按钮启动规则。


## 配置AMQP客户端消费消息

数据转发到AMQP消费组后，您的服务器需通过AMQP客户端消费消息。AMQP客户端开发说明，请参见[AMQP客户端接入说明](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/AMQP客户端接入说明.md)。

AMQP客户端开发示例，请参见：

-   [Java SDK接入示例](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/Java SDK接入示例.md)
-   [.NET SDK接入示例](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/.NET SDK接入示例.md)
-   [Node.js SDK接入示例](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/Node.js SDK接入示例.md)
-   [Python 2.7 SDK接入示例](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/Python 2.7 SDK接入示例.md)
-   [Python3 SDK接入示例]()
-   [PHP SDK接入示例]()
-   [Go SDK接入示例](/cn.zh-CN/消息通信/服务端订阅/使用AMQP服务端订阅/Go SDK接入示例.md)

